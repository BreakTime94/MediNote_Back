import{a,ao as t,an as O}from"./index-D3Bzzjcr.js";function A({mode:c="news",searchType:i="NEWS",title:b="뉴스",pageSizeOptions:z=[5,10,20],defaultSize:j=10,className:w="",asideSectionIds:v={latest:"latest",search:"search-result"}}){const[u,H]=a.useState(""),[h,T]=a.useState(j),[r,S]=a.useState(1),[p,k]=a.useState([]),[x,D]=a.useState(1),[E,$]=a.useState(0),[o,y]=a.useState(!1),L="pubDate,desc",M=a.useMemo(()=>c==="columns"?"/news/list/columns":c==="health-info"?"/news/list/health-info":"/news/list/news",[c]),f=e=>{if(!e)return"-";const s=new Date(e);if(Number.isNaN(s.getTime()))return e;const n=m=>m<10?`0${m}`:`${m}`;return`${s.getFullYear()}-${n(s.getMonth()+1)}-${n(s.getDate())} ${n(s.getHours())}:${n(s.getMinutes())}`},d=async(e=1)=>{y(!0);try{const s={page:e-1,size:h,sort:L};let n=M;u.trim().length>0&&(n="/news/search-title");const g=(await O.get(n,{params:n==="/news/search-title"?{keyword:u.trim(),type:i,...s}:s})).data||{},N=g.content??[];k(N.map(l=>({id:l.id,title:l.title,link:l.link,sourceName:l.sourceName,contentType:l.contentType,pubDate:l.pubDate}))),D(g.totalPages??1),$(g.totalElements??N.length),S(e)}catch(s){console.error("뉴스 목록 조회 실패:",s)}finally{y(!1)}};a.useEffect(()=>{d(1)},[h,c,i]);const C=e=>{e&&window.open(e,"_blank","noopener,noreferrer")},P=a.useMemo(()=>i==="COLUMN"?"칼럼 최신 소식":i==="HEALTH_INFO"?"건강정보 최신 소식":"뉴스 최신 소식",[i]);return t.jsx("section",{className:`w-full max-w-5xl mx-auto ${w}`,children:t.jsxs("div",{id:v?.latest||"latest",className:"mb-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:b}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:P})]})}),t.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[o?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"불러오는 중…"}):p.length===0?t.jsx("div",{className:"p-10 text-center text-gray-500",children:"표시할 항목이 없습니다."}):t.jsx("ul",{className:"divide-y divide-gray-100",children:p.map(e=>t.jsxs("li",{className:"grid grid-cols-12 gap-2 px-4 md:px-6 py-4",children:[t.jsxs("div",{className:"col-span-12 md:col-span-7",children:[t.jsx("button",{onClick:()=>C(e.link),className:"text-left text-gray-900 hover:underline",title:e.title,children:t.jsx("span",{className:"font-medium",children:e.title})}),t.jsxs("div",{className:"mt-2 md:hidden text-xs text-gray-500",children:[e.sourceName??"-"," · ",f(e.pubDate)]})]}),t.jsx("div",{className:"hidden md:flex md:col-span-2 items-center justify-center text-sm text-gray-600",children:e.sourceName??"-"}),t.jsx("div",{className:"col-span-5 md:col-span-3 flex items-center justify-end md:justify-center",children:t.jsx("span",{className:"text-sm text-gray-700",children:f(e.pubDate)})})]},e.id))}),t.jsxs("div",{className:"flex items-center justify-center gap-1 p-4",children:[t.jsx("button",{onClick:()=>r>1&&d(r-1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:r<=1||o,children:"이전"}),Array.from({length:Math.max(1,x)},(e,s)=>s+1).map(e=>t.jsx("button",{onClick:()=>d(e),className:"px-3 py-1.5 text-sm rounded-lg ring-1 "+(e===r?"bg-gray-900 text-white ring-gray-900":"ring-gray-200 hover:bg-gray-50"),disabled:o,children:e},e)),t.jsx("button",{onClick:()=>r<x&&d(r+1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:r>=x||o,children:"다음"})]}),t.jsxs("div",{className:"px-4 md:px-6 pb-4 text-xs text-gray-500 text-right",children:["총 ",E.toLocaleString(),"건"]})]})]})})}export{A as N};
