import{al as L,am as P,a as s,ao as e,an as _}from"./index-D3Bzzjcr.js";const S={1:{name:"공지사항",parent:null},2:{name:"QnA",parent:null},3:{name:"FAQ",parent:null},4:{name:"업데이트",parent:1},5:{name:"점검안내",parent:1},6:{name:"이벤트",parent:1},9:{name:"사이트 이용문의",parent:2},10:{name:"회원/계정",parent:2},11:{name:"오류신고",parent:2},12:{name:"기타",parent:2}};function z(o,c=!1){const r=S[o];if(!r)return"";if(!c||!r.parent)return r.name;const d=S[r.parent];return d?`${d.name} > ${r.name}`:r.name}function O({initialKeyword:o="",pageSizeOptions:c=[5,10,20],defaultSize:r=10,showWriteButton:d=!0,onWrite:g,onRead:p,adminMode:Y=!1}){const u=L(),{member:C,loading:B,fetchMember:G}=P(),h=C?.role==="ADMIN",[y,k]=s.useState(o),[l,F]=s.useState(r),[n,D]=s.useState(1),[b,E]=s.useState([]),[f,Q]=s.useState(0),[M,j]=s.useState(!1),[N,v]=s.useState(""),m=s.useMemo(()=>Math.max(1,Math.ceil(f/l)),[f,l]),$=()=>{if(!h){alert("관리자만 FAQ를 등록할 수 있습니다.");return}return g?g():u("/boards/faq/write")},R=t=>p?p(t):u(`/boards/faq/read/${t}`),w=t=>{if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?"-":`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},i=async(t=1)=>{j(!0),v("");try{const a={cond:{keyword:y?.trim()||null},criteria:{page:t,size:l}},x=await _.post("/boards/faq/list",a),I=(x.data?.items||[]).map(A=>({...A,boardCategoryName:z(A.boardCategoryId,!0)}));E(I),Q(x.data?.page?.totalElements??x.data?.totalElements??0),D(t)}catch(a){console.error("FAQ 목록 조회 실패:",a),v("FAQ 목록을 불러오지 못했습니다.")}finally{j(!1)}};s.useEffect(()=>{i(1)},[l]);const T=t=>{t.preventDefault(),i(1)};return e.jsxs("section",{className:"w-full max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"자주 묻는 질문"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"메디노트 이용 중 자주 묻는 질문을 확인하세요."})]}),d&&h&&e.jsx("button",{onClick:$,className:"rounded-2xl px-4 py-2 shadow-sm text-white bg-gradient-to-r from-pink-300 to-purple-300 hover:opacity-90 transition",children:"FAQ 등록"})]}),e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-4 md:p-5 shadow-sm mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"ms-auto"}),e.jsx("select",{className:"rounded-xl border-gray-200 text-sm",value:l,onChange:t=>F(Number(t.target.value)),children:c.map(t=>e.jsxs("option",{value:t,children:[t,"개씩"]},t))}),e.jsxs("form",{onSubmit:T,className:"flex items-stretch gap-2",children:[e.jsx("input",{type:"text",value:y,onChange:t=>k(t.target.value),placeholder:"FAQ 검색 (예: 로그인, 비밀번호, 오류...)",className:"rounded-xl border border-gray-200 text-sm px-3 py-2 w-56 focus:outline-none focus:ring-2 focus:ring-purple-200"}),e.jsx("button",{type:"submit",className:"rounded-2xl px-4 py-2 text-sm text-white bg-gradient-to-r from-pink-300 to-purple-300 hover:opacity-90 transition",children:"검색"})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 md:px-6 py-3 text-xs md:text-sm text-gray-500 bg-gray-50",children:[e.jsx("div",{className:"col-span-10 md:col-span-10",children:"제목"}),e.jsx("div",{className:"hidden md:block md:col-span-2 text-center",children:"작성일"})]}),M?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"불러오는 중…"}):N?e.jsx("div",{className:"p-8 text-center text-red-500",children:N}):b.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"표시할 FAQ가 없습니다."}):e.jsx("ul",{className:"divide-y divide-gray-100",children:b.map(t=>e.jsxs("li",{className:"grid grid-cols-12 gap-2 px-4 md:px-6 py-4",children:[e.jsxs("div",{className:"col-span-12 md:col-span-10",children:[e.jsx("button",{onClick:()=>R(t.id),className:"text-left text-gray-900 hover:underline",title:t.title,children:e.jsx("span",{className:"font-medium",children:t.title})}),e.jsx("div",{className:"mt-1 md:hidden text-xs text-gray-500",children:w(t.regDate)})]}),e.jsx("div",{className:"hidden md:flex md:col-span-2 items-center justify-center text-sm text-gray-600",children:w(t.regDate)})]},t.id))}),e.jsxs("div",{className:"flex items-center justify-center gap-1 p-4",children:[e.jsx("button",{onClick:()=>n>1&&i(n-1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:n<=1,children:"이전"}),Array.from({length:m},(t,a)=>a+1).map(t=>e.jsx("button",{onClick:()=>i(t),className:"px-3 py-1.5 text-sm rounded-lg ring-1 "+(t===n?"bg-gray-900 text-white ring-gray-900":"ring-gray-200 hover:bg-gray-50"),children:t},t)),e.jsx("button",{onClick:()=>n<m&&i(n+1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:n>=m,children:"다음"})]})]})]})}function q(){return e.jsx("main",{className:"w-full flex justify-center py-8 md:py-12",children:e.jsx(O,{})})}export{q as default};
