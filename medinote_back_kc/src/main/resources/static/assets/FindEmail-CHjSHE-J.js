import{a as n,al as z,ao as e,an as k}from"./index-D3Bzzjcr.js";import{u as S}from"./useEmailVerification-BiFkASqM.js";import{s as T}from"./commonToast-eM_n8a5E.js";import"./useEmailTimer-DN5LH1mw.js";function Z(){const[i,p]=n.useState(""),[s,c]=n.useState(!1),[m,f]=n.useState({extraEmail:!1}),x=z(),g=a=>{const{name:t,value:r}=a.target;f(l=>({...l,[t]:!0})),u(l=>({...l,[t]:b(t,r)}))},[o,u]=n.useState({}),b=(a,t)=>{switch(a){case"extraEmail":if(!t)return"추가 이메일은 필수입니다.";if(!/^(?!.*\s)[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t))return"문자 내 공백은 불가하며, 올바른 이메일 형식이어야 합니다. ex) aaa@bbb.ccc 등";break;default:return""}return""},j=a=>{const{name:t,value:r}=a.target;p(r),u(l=>({...l,[t]:b(t,r)}))},{verificationCode:v,setVerificationCode:w,showCodeInput:d,setShowCodeInput:N,sendCode:y,verifyCode:E,leftTime:h,formatTime:C}=S();return e.jsx("div",{className:"flex items-center justify-center bg-white pt-16",children:e.jsxs("div",{className:"mb-4 mx-auto bg-white shadow-lg rounded-2xl border p-8 w-120",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),e.jsx("input",{id:"extraEmail",name:"extraEmail",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:bg-gray-100",placeholder:"가입하셨을 때 기입한 추가 이메일을 입력하세요",onBlur:g,onChange:a=>{j(a),c(!1),N(!1)},value:i,disabled:s}),m.extraEmail&&!o.extraEmail&&!s&&e.jsx("button",{type:"button",className:"mt-2 w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:()=>{y(i,"find"),window.alert("인증코드를 발송하였습니다. 만약 코드가 도착하지 않았다면, 입력하신 이메일이 회원정보와 일치하지 않거나 추가 이메일 인증을 하지 않았는지 확인하여 주시기 바랍니다.")},children:"인증메일 요청"}),d&&!s&&e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("input",{type:"text",name:"verificationCode",placeholder:"인증코드 입력",className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400  disabled:bg-gray-200",disabled:s,value:v,onChange:a=>w(a.target.value)}),h&&e.jsx("span",{className:"text-xs text-gray-500 my-auto font-bold",children:C(h)}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-amber-100",disabled:s,onClick:()=>{E(i,s,c,"find")},children:"확인"})]}),!d&&s&&e.jsx("button",{type:"button",className:"mt-2 w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:()=>{k.post("/member/find/email",{extraEmail:i}).then(a=>{window.alert("회원님의 아이디는 "+a.data.email+" 입니다."),x("/member/login")}).catch(a=>{T.info({title:a.response?.data?.status,message:a.response?.data?.message}),setTimeout(()=>x("/member"),2e3)})},children:"이메일 확인하기"}),!d&&s&&e.jsx("ul",{className:"mt-2 text-xs",children:e.jsx("li",{className:"text-blue-500",children:"이메일 인증이 완료되었습니다."})}),m.extraEmail&&o.extraEmail&&e.jsx("ul",{className:"mt-2 text-xs",children:e.jsx("li",{className:"text-red-500",children:o.extraEmail})}),e.jsxs("div",{className:"mt-4 p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-semibold text-xm text-gray-800",children:"유의사항"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 pl-2",children:[e.jsxs("li",{className:"flex gap-2 ",children:[e.jsx("span",{children:"·"}),e.jsx("span",{children:"아이디 찾기는 추가 이메일 인증시에만 사용하실 수 있습니다."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"·"}),e.jsx("span",{children:"인증코드를 받지 못하신 경우, 가입 정보와 일치하는지 다시 한 번 확인하여 주시기 바랍니다."})]})]})]})]})})}export{Z as default};
