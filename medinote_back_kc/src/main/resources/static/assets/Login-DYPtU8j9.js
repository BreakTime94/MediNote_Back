import{al as g,am as p,a as x,ao as e,an as f}from"./index-D3Bzzjcr.js";import{s as a}from"./commonToast-eM_n8a5E.js";function b(){const n=g(),{setMember:d}=p(),u=()=>{window.open("http://localhost:8083/api/oauth2/authorization/google","googleLogin","width=500,height=600")};return x.useEffect(()=>{const s=l=>{if(l.origin!=="http://localhost:8083")return;console.log("로그인 결과:",l.data);const{status:o,provider:c,member:m,message:t}=l.data;o==="LOGIN_SUCCESS"?(a.success({title:o,desc:t}),d({...m,provider:c}),n("/")):o==="NEED_REGISTER"?n("/member/social/register",{state:{provider:c,member:m}}):(window.alert("알 수 없는 오류입니다. 다시 시도하여 주세요."),n("/member/login"))};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[n]),e.jsxs("button",{onClick:u,className:"w-full h-12 flex items-center justify-center gap-3 rounded-lg border border-gray-300 bg-white cursor-pointer hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_710_6217)",children:[e.jsx("path",{d:"M29.6 20.2273C29.6 19.5182 29.5364 18.8364 29.4182 18.1818H20V22.05H25.3818C25.15 23.3 24.4455 24.3591 23.3864 25.0682V27.5773H26.6182C28.5091 25.8364 29.6 23.2727 29.6 20.2273Z",fill:"#4285F4"}),e.jsx("path",{d:"M20 30C22.7 30 24.9636 29.1045 26.6181 27.5773L23.3863 25.0682C22.4909 25.6682 21.3454 26.0227 20 26.0227C17.3954 26.0227 15.1909 24.2636 14.4045 21.9H11.0636V24.4909C12.7091 27.7591 16.0909 30 20 30Z",fill:"#34A853"}),e.jsx("path",{d:"M14.4045 21.9C14.2045 21.3 14.0909 20.6591 14.0909 20C14.0909 19.3409 14.2045 18.7 14.4045 18.1V15.5091H11.0636C10.3864 16.8591 10 18.3864 10 20C10 21.6136 10.3864 23.1409 11.0636 24.4909L14.4045 21.9Z",fill:"#FBBC04"}),e.jsx("path",{d:"M20 13.9773C21.4681 13.9773 22.7863 14.4818 23.8227 15.4727L26.6909 12.6045C24.9591 10.9909 22.6954 10 20 10C16.0909 10 12.7091 12.2409 11.0636 15.5091L14.4045 18.1C15.1909 15.7364 17.3954 13.9773 20 13.9773Z",fill:"#E94235"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_710_6217",children:e.jsx("rect",{width:"40",height:"40",fill:"white",transform:"translate(10 10)"})})})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in with Google"})]})}function v(n){const[d,u]=x.useState({email:"",password:""}),s=g(),{setMember:l}=p(),o=t=>{t.preventDefault(),s("/member/register")},c=t=>{t.preventDefault();let r=d;const{name:h,value:i}=t.target;r[h]=i,u(r)},m=t=>{t.preventDefault(),f.post("/member/auth/login",d,{withCredentials:!0}).then(r=>{l(r.data.member),a.success({title:r.data.status,disc:r.data.message}),s("/")}).catch(r=>{const{code:h,message:i}=r.response?.data||{};switch(console.error("[LOGIN ERROR]",h,i),h){case"MEMBER_NOT_FOUND":a.error({title:i||"존재하지 않는 회원입니다.",desc:"회원가입 페이지로 이동합니다."}),s("/member/register");break;case"MEMBER_PASSWORD_INVALID":a.error({title:i||"비밀번호가 일치하지 않습니다.",desc:"비밀번호를 다시 확인해주세요."});break;case"MEMBER_DELETED":a.error({title:i||"삭제된 회원입니다.",desc:"복구를 원하시면 고객센터로 문의해주세요."});break;default:a.error({title:i||"로그인 중 오류가 발생했습니다.",desc:"잠시 후 다시 시도해주세요."})}})};return e.jsx("div",{className:"flex items-center justify-center bg-white pt-16",children:e.jsxs("div",{className:"shadow-lg rounded-2xl border p-8 w-96",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700 mb-1",children:"아이디"}),e.jsx("input",{id:"email",name:"email",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"아이디를 입력하세요",onChange:c})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호"}),e.jsx("input",{id:"password",name:"password",type:"password",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"비밀번호를 입력하세요",onChange:c})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("span",{className:"text-xs cursor-pointer hover:underline",onClick:()=>{s("/member/find/email")},children:"아이디 찾기"})}),e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("span",{className:"text-xs cursor-pointer hover:underline",onClick:()=>{s("/member/find/password")},children:"비밀번호 찾기"})})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:`flex-1 bg-pink-300 text-white py-2 rounded-lg\r
                     hover:bg-pink-400 active:bg-pink-500 cursor-pointer`,onClick:m,children:"로그인"}),e.jsx("button",{type:"button",className:`flex-1 bg-purple-300 text-gray-700 py-2 rounded-lg shadow\r
                     hover:bg-purple-400 active:bg-purple-500 cursor-pointer`,onClick:o,children:"회원가입"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(b,{})})]})})}export{v as default};
