import{al as P,a as s,ao as t,an as b}from"./index-D3Bzzjcr.js";function z({initialStatus:f="ALL",initialKeyword:j="",pageSizeOptions:N=[5,10,20],defaultSize:v=10,showWriteButton:w=!0,onWrite:o,onRead:m}){const x=P(),[c,S]=s.useState(f),[g,A]=s.useState(j),[n,k]=s.useState(v),[a,L]=s.useState(1),[p,E]=s.useState([]),[u,I]=s.useState(0),[C,h]=s.useState(!1),[M,W]=s.useState({}),d=s.useMemo(()=>Math.max(1,Math.ceil(u/n)),[u,n]),D=e=>e==="ANSWERED"?"bg-green-50 text-green-700 ring-1 ring-green-200":e==="WAITING"?"bg-amber-50 text-amber-700 ring-1 ring-amber-200":"bg-gray-50 text-gray-700 ring-1 ring-gray-200",T=()=>o?o():x("/boards/qna/write"),G=e=>m?m(e):x(`/boards/qna/read/${e}`),Q=async()=>{try{const r=(await b.get("/member/list/info")).data?.memberInfoList||[],l={};r.forEach(y=>l[y.id]=y.nickname),W(l)}catch(e){console.error("회원 목록 불러오기 실패:",e)}},i=async(e=1)=>{h(!0);try{const r={cond:{keyword:g?.trim()||null,qnaStatus:c==="ALL"?null:c},criteria:{page:e,size:n}},l=await b.post("/boards/qna/list",r);E(l.data?.items||[]),I(l.data?.page?.totalElements??0),L(e)}catch(r){console.error("QnA 목록 조회 실패:",r)}finally{h(!1)}};s.useEffect(()=>{Q(),i(1)},[c,n]);const R=e=>{e.preventDefault(),i(1)};return t.jsxs("section",{className:"w-full max-w-5xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"QnA"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"궁금한 점을 검색하거나 질문을 남겨보세요."})]}),w&&t.jsx("button",{onClick:T,className:"rounded-2xl px-4 py-2 shadow-sm text-white bg-gradient-to-r from-pink-300 to-purple-300 hover:opacity-90 transition",children:"질문하기"})]}),t.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-4 md:p-5 shadow-sm mb-6",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:[["ALL","WAITING","ANSWERED"].map(e=>t.jsx("button",{onClick:()=>S(e),className:"px-3 py-1.5 rounded-xl text-sm ring-1 transition "+(c===e?"bg-gradient-to-r from-pink-200 to-purple-200 text-gray-900 ring-transparent":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"),children:e==="ALL"?"전체":e==="WAITING"?"답변대기":"답변완료"},e)),t.jsx("div",{className:"ms-auto"}),t.jsx("select",{className:"rounded-xl border-gray-200 text-sm",value:n,onChange:e=>k(Number(e.target.value)),children:N.map(e=>t.jsxs("option",{value:e,children:[e,"개씩"]},e))}),t.jsxs("form",{onSubmit:R,className:"flex items-stretch gap-2",children:[t.jsx("input",{type:"text",value:g,onChange:e=>A(e.target.value),placeholder:"제목/내용/작성자 검색",className:"rounded-xl border border-gray-200 text-sm px-3 py-2 w-56 focus:outline-none focus:ring-2 focus:ring-purple-200"}),t.jsx("button",{type:"submit",className:"rounded-2xl px-4 py-2 text-sm text-white bg-gradient-to-r from-pink-300 to-purple-300 hover:opacity-90 transition",children:"검색"})]})]})}),t.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 md:px-6 py-3 text-xs md:text-sm text-gray-500 bg-gray-50",children:[t.jsx("div",{className:"col-span-6 md:col-span-6",children:"제목"}),t.jsx("div",{className:"hidden md:block md:col-span-2 text-center",children:"작성자"})," ",t.jsx("div",{className:"hidden md:block md:col-span-2 text-center",children:"작성일"}),t.jsx("div",{className:"col-span-4 md:col-span-2 text-center",children:"상태"})]}),C?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"불러오는 중…"}):p.length===0?t.jsx("div",{className:"p-10 text-center text-gray-500",children:"표시할 항목이 없습니다."}):t.jsx("ul",{className:"divide-y divide-gray-100",children:p.map(e=>t.jsxs("li",{className:"grid grid-cols-12 gap-2 px-4 md:px-6 py-4",children:[t.jsx("div",{className:"col-span-12 md:col-span-6",children:t.jsx("button",{onClick:()=>G(e.id),className:"text-left text-gray-900 hover:underline",title:e.title,children:t.jsx("span",{className:"font-medium",children:e.title})})}),t.jsx("div",{className:"hidden md:flex md:col-span-2 items-center justify-center text-sm text-gray-700",children:M[e.memberId]??"-"}),t.jsx("div",{className:"hidden md:flex md:col-span-2 items-center justify-center text-sm text-gray-600",children:e.regDate?.slice(0,10)??"-"}),t.jsx("div",{className:"col-span-12 md:col-span-2 flex items-center justify-center",children:t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs ${D(e.qnaStatus)}`,children:e.qnaStatus==="ANSWERED"?"답변완료":e.qnaStatus==="WAITING"?"답변대기":e.qnaStatus})})]},e.id))}),t.jsxs("div",{className:"flex items-center justify-center gap-1 p-4",children:[t.jsx("button",{onClick:()=>a>1&&i(a-1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:a<=1,children:"이전"}),Array.from({length:d},(e,r)=>r+1).map(e=>t.jsx("button",{onClick:()=>i(e),className:"px-3 py-1.5 text-sm rounded-lg ring-1 "+(e===a?"bg-gray-900 text-white ring-gray-900":"ring-gray-200 hover:bg-gray-50"),children:e},e)),t.jsx("button",{onClick:()=>a<d&&i(a+1),className:"px-3 py-1.5 text-sm rounded-lg ring-1 ring-gray-200 hover:bg-gray-50 disabled:opacity-40",disabled:a>=d,children:"다음"})]})]})]})}function K(){return t.jsx("main",{className:"w-full flex justify-center py-8 md:py-12",children:t.jsx(z,{})})}export{K as default};
