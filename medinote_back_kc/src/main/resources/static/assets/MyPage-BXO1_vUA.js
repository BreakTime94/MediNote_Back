import{a as o,am as C,ao as e,aG as j,aH as w}from"./index-D3Bzzjcr.js";import A from"./Profile-4TMLvaO-.js";import I from"./ChangePassword-B2aJT2Xo.js";import{A as N}from"./AsideNav-DU8b6dgA.js";import S from"./MeasurementEdit-Bfh8G1yQ.js";import"./commonToast-eM_n8a5E.js";import"./useEmailTimer-DN5LH1mw.js";import"./UseDuplicateCheck-CCrvuKal.js";import"./Button-C8G8zfQ9.js";import"./healthScoreCalculator-CBAA5TLi.js";function E({items:s=[],defaultActiveId:d=null,componentMap:a={},scrollOffset:p=100,scrollToTopOnComponent:m=!0}={}){const l=d||s[0]?.id||"",[f,c]=o.useState(l),[t,i]=o.useState(null);o.useEffect(()=>{!t&&l&&a[l]&&i(l)},[]);const x=o.useCallback((u,n)=>{if(u==="component")i(n),c(n);else if(u==="scroll"){const y=Object.keys(a).find(h=>n.startsWith(`${h}-`));y?(i(y),c(n),requestAnimationFrame(()=>{setTimeout(()=>{const h=document.getElementById(n);if(h){const b=h.getBoundingClientRect().top+window.scrollY-p;window.scrollTo({top:b,behavior:"smooth"})}},100)})):(i(null),c(n))}},[a,p]),g=o.useCallback(u=>{c(u)},[]);o.useEffect(()=>{if(!m||!t)return;s.find(n=>n.id===t&&n.actionType==="component")&&window.scrollTo({top:0,behavior:"smooth"})},[t,s,m]);const r=t?a[t]:null;return{activeId:f,activeComponent:t,isComponentMode:!!t,ActiveComponent:r,handleAction:x,handleChange:g,setActiveId:c,setActiveComponent:i}}function F(){const{member:s}=C(),[d,a]=o.useState(null),[p,m]=o.useState(null),l=()=>{a(null),m(null)},f=o.useMemo(()=>{const r=[{id:"profile",label:"프로필 정보",actionType:"component"}];return s?.fromSocial||r.push({id:"change-password",label:"비밀번호 변경",actionType:"component"}),r.push({id:"measurementlist",label:"내 건강정보 리스트",actionType:"component"},{id:"measurementchart",label:"내 건강정보 차트",actionType:"component"}),r},[s?.fromSocial]),c={profile:A,"change-password":()=>s?.fromSocial?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"소셜 로그인 회원은 비밀번호 변경을 할 수 없습니다."}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[s.provider," 계정에서 비밀번호를 관리해주세요."]})]}):e.jsx(I,{}),measurementlist:()=>d?e.jsxs("div",{children:[e.jsx("button",{onClick:l,className:"mb-4 px-4 py-2 text-gray-700 transition",children:"← 뒤로가기"}),e.jsx(S,{mode:"mypage",id:d,presetData:p,onMypage:l,onBack:()=>{a(null),m(null)}})]}):e.jsx(w,{mode:"mypage",onEdit:(r,v)=>{console.log(" 수정 클릭됨 ID:",r,v),a(r),m(v)}}),measurementchart:j},{activeId:t,ActiveComponent:i,handleAction:x,handleChange:g}=E({items:f,componentMap:c,defaultActiveId:"profile",scrollOffset:100});return e.jsx("div",{className:"flex justify-center bg-gray-50 py-10 min-h-screen",children:e.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-6 max-w-6xl w-full",children:[e.jsx(N,{title:"마이페이지",subtitle:"내 정보 관리",items:f,sticky:{enabled:!0,top:24,width:260},scroll:{offset:100,smooth:!0,spy:!0},ui:{activeGradientClass:"bg-gradient-to-r from-pink-400 to-purple-400",inactiveHoverClass:"hover:bg-purple-50",buttonHeightClass:"h-11"},activeId:t,onChange:g,onAction:x}),e.jsx("main",{className:"bg-white border rounded-2xl shadow-sm p-8",children:i?e.jsx(i,{}):e.jsx("p",{className:"text-gray-500",children:"메뉴를 선택하세요."})})]})})}export{F as default};
